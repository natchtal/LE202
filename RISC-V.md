# ขั้นตอนการทำงานของRISC-V
1.เมื่อกดรัน คำสั่ง addi x1,x0,32 จะถูกส่งไปที่dataในBus และpcในprogram counterจะถูกส่งมาที่addrในBusเช่นกัน

2.จากนั้นdataในBus ถูกส่งมาที่ Insruction reg เพื่อแปลงคำสั่ง เราจะได้คำสั่งว่าให้เอา32ที่ถูกแปลงเป็นเลขฐาน16ซึ่งมีค่าเท่ากับ 00000020 มาบวกกับ x0 ซึ่งมีค่าเท่ากับ 00000000 แล้วจะได้ผลลัพธ์คือ 00000020 ไปเก็บค่าไว้ที่ x1

3.เมื่อรัน1คำสั่งเสร็จค่าของpcในprogram counterจะถูกบวกเพิ่มไป4ซึ่งจะมีค่าเท่ากับ 00000004

4.คำสั่งต่อไป lui x2, 0xc0000000 จะถูกส่งไปที่dataในBus และpcในprogram counterจะถูกส่งมาที่addrในBus

5.จากนั้นdataในBus ถูกส่งมาที่ Insruction reg เพื่อแปลงคำสั่ง เราจะได้คำสั่งว่าให้เอาค่า c0000000 ไปเก็บค่าไว้ที่ x2 โดยจะเอาเฉพาะ 20 bits แรกเท่านั้น

6.เมื่อรัน1คำสั่งเสร็จค่าของpcในprogram counterจะถูกบวกเพิ่มไป4ซึ่งจะมีค่าเท่ากับ 00000008

7.คำสั่งต่อไปlbu x3, 0(x1) จะถูกส่งไปที่dataในBus และpcในprogram counterจะถูกส่งมาที่addrในBus

8.จากนั้นdataในBus ถูกส่งมาที่ Insruction reg เพื่อแปลงคำสั่ง เราจะได้คำสั่งว่าให้เอาค่าจาก x1 เพียง 1 byte ซึ่งในที่นี้ก็คือข้อมูลตัวที่ 00000020 โดยมีค่าเท่ากับ 4e มาเก็บค่าไว้ที่ x3 

9.เมื่อรัน1คำสั่งเสร็จค่าของpcในprogram counterจะถูกบวกเพิ่มไป4ซึ่งจะมีค่าเท่ากับ 0000000c

10.คำสั่งต่อไป beq x3, x0, +16 จะถูกส่งไปที่dataในBus และpcในprogram counterจะถูกส่งมาที่addrในBus 

11.จากนั้นdataในBus ถูกส่งมาที่ Insruction reg เพื่อแปลงคำสั่ง เราจะได้คำสั่งว่าให้นำค่า x3 ที่เท่ากับ 0000004e เทียบกับ x0 ที่มีค่าเท่ากับ 00000000 ถ้าเท่ากันให้กระโดดไปทำคำสั่งในอีก 16 bit สุดท้ายได้ผลว่าx0ไม่เท่ากับx3 ดังนั้นตัวโปรแกรมจะรันคำสั่งถัดไป

12.เมื่อรัน1คำสั่งเสร็จค่าของpcในprogram counterจะถูกบวกเพิ่มไป4ซึ่งจะมีค่าเท่ากับ 00000010

13.คำสั่งต่อไป sb x3, 0(x2) จะถูกส่งไปที่dataในBus และpcในprogram counterจะถูกส่งมาที่addrในBus 

13.จากนั้นdataในBus ถูกส่งมาที่ Insruction reg เพื่อแปลงคำสั่ง เราจะได้คำสั่งว่าให้นำค่าใน x3 ที่มีค่าเท่ากับ 0000004e ไปเก็บไว้ใน x2 โดย x2 มีค่า c0000000 นั่นหมายความว่า 4e=N จะไปแสดงใน c0000000 ที่เหมือนกับจอแสดงผล

14.เมื่อรัน1คำสั่งเสร็จค่าของpcในprogram counterจะถูกบวกเพิ่มไป4ซึ่งจะมีค่าเท่ากับ 00000014

15.คำสั่งต่อไป addi x1, x1, 1 จะถูกส่งไปที่dataในBus และpcในprogram counterจะถูกส่งมาที่addrในBus 

16.จากนั้นdataในBus ถูกส่งมาที่ Insruction reg เพื่อแปลงคำสั่ง เราจะได้คำสั่งว่าให้นำค่า x1 ที่เท่ากับ 00000020 บวกกับ 1 จะได้ผลลัพธ์เท่ากับ 00000021 นำค่าที่ได้ไปเก็บไว้ใน x1

17.เมื่อรัน1คำสั่งเสร็จค่าของpcในprogram counterจะถูกบวกเพิ่มไป4ซึ่งจะมีค่าเท่ากับ 00000018

18.คำสั่งต่อไป jal x0, -16 จะถูกส่งไปที่dataในBus และpcในprogram counterจะถูกส่งมาที่addrในBus

19.จากนั้นdataในBus ถูกส่งมาที่ Insruction reg เพื่อแปลงคำสั่ง เราจะได้คำสั่งว่าให้ย้อนกลับไปทำคำสั่ง lbu x3, 0(x1) อีกครั้ง และค่าของpcในprogram counterจะถูกย้อนกลับไปมีค่าเท่ากับ 00000008

20.คำสั่งต่อไปlbu x3, 0(x1) จะถูกส่งไปที่dataในBus และpcในprogram counterจะถูกส่งมาที่addrในBus

21.จากนั้นdataในBus ถูกส่งมาที่ Insruction reg เพื่อแปลงคำสั่ง เราจะได้คำสั่งว่าให้เอาค่าจาก x1 เพียง 1 byte ซึ่งในที่นี้ก็คือข้อมูลตัวที่ 00000021 โดยมีค่าเท่ากับ 54 มาเก็บค่าไว้ที่ x3

22.เมื่อรัน1คำสั่งเสร็จค่าของpcในprogram counterจะถูกบวกเพิ่มไป4ซึ่งจะมีค่าเท่ากับ 0000000c

23.คำสั่งต่อไป beq x3, x0, +16 จะถูกส่งไปที่dataในBus และpcในprogram counterจะถูกส่งมาที่addrในBus 

24.จากนั้นdataในBus ถูกส่งมาที่ Insruction reg เพื่อแปลงคำสั่ง เราจะได้คำสั่งว่าให้นำค่า x3 ที่เท่ากับ 00000054 เทียบกับ x0 ที่มีค่าเท่ากับ 00000000 ถ้าเท่ากันให้กระโดดไปทำคำสั่งในอีก 16 bit สุดท้ายได้ผลว่าx0ไม่เท่ากับx3 ดังนั้นตัวโปรแกรมจะรันคำสั่งถัดไป

25.เมื่อรัน1คำสั่งเสร็จค่าของpcในprogram counterจะถูกบวกเพิ่มไป4ซึ่งจะมีค่าเท่ากับ 00000010

26.คำสั่งต่อไป sb x3, 0(x2) จะถูกส่งไปที่dataในBus และpcในprogram counterจะถูกส่งมาที่addrในBus 

27.จากนั้นdataในBus ถูกส่งมาที่ Insruction reg เพื่อแปลงคำสั่ง เราจะได้คำสั่งว่าให้นำค่าใน x3 ที่มีค่าเท่ากับ 00000054 ไปเก็บไว้ใน x2 โดย x2 มีค่า c0000000 นั่นหมายความว่า 54=T จะไปแสดงใน c0000000 ที่เหมือนกับจอแสดงผล

28.เมื่อรัน1คำสั่งเสร็จค่าของpcในprogram counterจะถูกบวกเพิ่มไป4ซึ่งจะมีค่าเท่ากับ 00000014

29.คำสั่งต่อไป addi x1, x1, 1 จะถูกส่งไปที่dataในBus และpcในprogram counterจะถูกส่งมาที่addrในBus 

30.จากนั้นdataในBus ถูกส่งมาที่ Insruction reg เพื่อแปลงคำสั่ง เราจะได้คำสั่งว่าให้นำค่า x1 ที่เท่ากับ 00000021 บวกกับ 1 จะได้ผลลัพธ์เท่ากับ 00000022 นำค่าที่ได้ไปเก็บไว้ใน x1

31.เมื่อรัน1คำสั่งเสร็จค่าของpcในprogram counterจะถูกบวกเพิ่มไป4ซึ่งจะมีค่าเท่ากับ 00000018

32.คำสั่งต่อไป jal x0, -16 จะถูกส่งไปที่dataในBus และpcในprogram counterจะถูกส่งมาที่addrในBus

33.จากนั้นdataในBus ถูกส่งมาที่ Insruction reg เพื่อแปลงคำสั่ง เราจะได้คำสั่งว่าให้ย้อนกลับไปทำคำสั่ง lbu x3, 0(x1) อีกครั้ง

34.คำสั่งต่อไปlbu x3, 0(x1) จะถูกส่งไปที่dataในBus และpcในprogram counterจะถูกส่งมาที่addrในBus และค่าของpcในprogram counterจะถูกย้อนกลับไปมีค่าเท่ากับ 00000008

35.จากนั้นdataในBus ถูกส่งมาที่ Insruction reg เพื่อแปลงคำสั่ง เราจะได้คำสั่งว่าให้เอาค่าจาก x1 เพียง 1 byte ซึ่งในที่นี้ก็คือข้อมูลตัวที่ 00000022 โดยมีค่าเท่ากับ 00 มาเก็บค่าไว้ที่ x3 

36.เมื่อรัน1คำสั่งเสร็จค่าของpcในprogram counterจะถูกบวกเพิ่มไป4ซึ่งจะมีค่าเท่ากับ 0000000c

37.คำสั่งต่อไป beq x3, x0, +16 จะถูกส่งไปที่dataในBus และpcในprogram counterจะถูกส่งมาที่addrในBus 

38.จากนั้นdataในBus ถูกส่งมาที่ Insruction reg เพื่อแปลงคำสั่ง เราจะได้คำสั่งว่าให้นำค่า x3 ที่เท่ากับ 00000000 เทียบกับ x0 ที่มีค่าเท่ากับ 00000000 สุดท้ายเปรียบเทียบแล้วได้ค่าเท่ากันให้กระโดดไปทำคำสั่งในอีก 16 bit  ดังนั้นตัวโปรแกรมจะรันคำสั่งjal x0, 0 เป็นอันสิ้นสุดคำสั่ง


